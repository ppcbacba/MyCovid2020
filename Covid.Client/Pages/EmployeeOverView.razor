@page "/employees"
@using Covid.Shared.Dtos
<h3>EmployeeOverview</h3>
<table class="table table-striped">
    <thead class="thead-dark">
    <tr >
        <th>编号</th>
        <th>部门</th>
        <th>姓名</th>
        <th>性别</th>
        <th>出生日期</th>
        <th>操作</th>
    </tr>
    </thead>
    @foreach (var item in Employees)
    {
        <tr>
            <td>@item.Id</td>
            <td>@item.DepartmentId</td>
            <td>@item.Name</td>
            <td>@item.Gender</td>
            <td>@item.BirthDate</td>
            <td>
                <a href="employeedetail/@item.Id" >细节</a>
            </td>
        </tr>
    }
</table>


@code {

    [Inject] private HttpClient client { get; set; }
    public EmployeeDto employee { get; set; }
    public IEnumerable<EmployeeDto> Employees { get; set; }=new List<EmployeeDto>();

    
    protected override async Task OnInitializedAsync()
    {
        Employees = await client.GetFromJsonAsync<IList<EmployeeDto>>("api/department/1/employee");

        await base.OnInitializedAsync();
    }

}
