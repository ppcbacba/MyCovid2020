@page "/employeedetail/{EmployeeId}"
@using Covid.Shared.Dtos

<h3>EmployeeDetail @Employee.Name</h3>
<ul class="list-group">
    <li class="list-group-item">@Employee.Id</li>
    <li class="list-group-item">@Employee.DepartmentId</li>
    <li class="list-group-item">@Employee.Name</li>
    <li class="list-group-item">@Employee.BirthDate</li>
    <li class="list-group-item">@Employee.Gender</li> 
</ul>
<a href="employees" class="btn btn-light">返回</a>
@code {
    [Inject] public HttpClient Client { get; set; }

    [Parameter]
    public string EmployeeId { get; set; }
    public EmployeeDto Employee { get; set; }=new EmployeeDto();
    public IEnumerable<EmployeeDto> Employees { get; set; }=new List<EmployeeDto>();

        protected override async Task OnInitializedAsync()
        {
            Employees = await Client.GetFromJsonAsync<IList<EmployeeDto>>("api/department/1/employee");
            Employee = Employees.FirstOrDefault(x => x.Id == int.Parse(EmployeeId));
            await base.OnInitializedAsync();
        }

}

